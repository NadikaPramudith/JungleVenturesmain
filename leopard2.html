<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#008000"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jungle Ventures</title>
    <!-- ==== CSS ==== -->
    <link rel="stylesheet" href="leopard.css">
    <script src="//unpkg.com/alpinejs" defer></script>
    <link rel ="icon" type="image/x-icon" href="./img/maskable-icon.pn">
    <link rel="manifest" href="manifest.json">
    <!--googlefonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <h1 class="logo">Jungle Ventures</h1>
        <ul class="nav-links">
            <li class="active"><a href="home2.html">Home</a></li>
            <li><a href="introduction2.html">Introduction</a></li>
            <li><a href="D.O.W.C2.html">D.O.W.C</a></li>
            <li><a href="animals2.html">Animals</a></li>
            <li><a href="leopard2.html">Sri lankan Leopard</a></li>
            <li><a href="yala2.html">Yala National Park</a></li>
            <li><a href="wilpattu2.html">Wilpattu National Park</a></li>
            <li><a href="login.html">Logout</a></li>
        </ul>
        <div class="mobile-nav">
            <img src="img/menu-btn.png" alt="" class="menu-btn">
            <h1 class="close-btn">X</h1>
        </div>
    </nav>

    <header>
        <div class="header-content">
            <h1>Sri Lankan Leopard </h1>
        </div>
    </header>
    <main>
        <div x-data="leopardData">
            <section class="wrapper">
                <img :src="img1" class="img-2">
                <div class="text-box">
                    <h2 x-text="heading"></h2><br>
                    <!-- Editable paragraphs -->
                    <p id="paragraph1" x-text="paragraph1"></p>
                    <button @click="openPopup('paragraph1')" class="ctn">Edit</button>
                    <p id="paragraph2" x-text="paragraph2"></p>
                    <button @click="openPopup('paragraph2')" class="ctn">Edit</button>
                    <p id="paragraph3" x-text="paragraph3"></p>
                    <button @click="openPopup('paragraph3')" class="ctn">Edit</button>

                    <!-- Sub-paragraphs -->
                    <h3 x-text="subheading"></h3><br>
                    <p>
                        <li>Yala National Park</li><br>
                        <li>Wilpattu National Park:</li><br>
                        <li>Udawalawe National Park</li><br>
                        <li>Horton Plains National Park</li><br>
                        <li>Sinharaja Forest Reserve</li><br>
                    </p>

                    <!-- Editable sub-paragraphs -->
                    <h2 x-text="subheading1"></h2>
                    <h3 x-text="subheading2"></h3>
                    <p id="subpara1" x-text="subpara1"></p>
                    <button @click="openPopup('subpara1')" class="ctn">Edit</button>
                    <h3 x-text="subheading3"></h3>
                    <p id="subpara2" x-text="subpara2"></p>
                    <button @click="openPopup('subpara2')" class="ctn">Edit</button>
                    <h3 x-text="subheading4"></h3>
                    <p id="subpara3" x-text="subpara3"></p>
                    <button @click="openPopup('subpara3')" class="ctn">Edit</button>
                    <h3 x-text="subheading5"></h3>
                    <p id="subpara4" x-text="subpara4"></p>
                    <button @click="openPopup('subpara4')" class="ctn">Edit</button>
                </div>
            </section>
            <section class="wrapper">
                <img :src="img2" class="img-3" x-show="img2">
                <div class="text-box">
                    <h2 x-text="subheading6"></h2>
                    <h3 x-text="subheading7"></h3>
                    <p id="subpara5" x-text="subpara5"></p>
                    <button @click="openPopup('subpara5')" class="ctn">Edit</button>
                    <h3 x-text="subheading8"></h3>
                    <p id="subpara6" x-text="subpara6"></p>
                    <button @click="openPopup('subpara6')" class="ctn">Edit</button>
                    <h3 x-text="subheading9"></h3>
                    <p id="subpara7" x-text="subpara7"></p>
                    <button @click="openPopup('subpara7')" class="ctn">Edit</button>
                </div>
            </section>
        </div>
    </main>

    <!-- Popup Container for editing -->
    <div id="popupContainer" style="display: none;">
        <h2>Edit Text</h2>
        <textarea id="textContent" rows="10" cols="50"></textarea>
        <button id="saveButton" class="ctn">Save</button>
        <button id="closeButton" class="ctn">Close</button>
    </div>

    <!-- Footer -->
    <section class="footer">
        <p>Discover the wonders of the wild with our wildlife tour website, where every adventure is a journey into the
            heart of nature, offering unforgettable experiences and a deep appreciation for the diverse and magnificent
            creatures that inhabit Sri Lanka.</p><br>
            <!-- News letter toggle button -->
            <div x-data="{ toggleSubscription: toggleSubscription }">
                <button @click="toggleSubscription" class="ctn">Join Our Newsletter!</button>
            </div>
        <p>
            <h2>Contact us</h2>
        </p>
        <p>Colombo 7,western province,Sri Lanka | Phone: 081-1234567 | Email: Nadikabambarenda@gmail.com</p><br>
        <p>Copyright Â© 2024 Jungle Ventures</p>
    </section>

    <script>
        const mobileNav = document.querySelector('.mobile-nav')
        const menuBtn = document.querySelector('.menu-btn')
        const navlinks = document.querySelector('.nav-links')
        const closeBtn = document.querySelector('.close-btn')

        mobileNav.addEventListener('click', (e) => {
            navlinks.classList.toggle('mobile-menu')
            if (e.target === menuBtn) {
                menuBtn.replaceWith(closeBtn)
                closeBtn.style.display = 'block'
            }
            if (e.target === closeBtn) {
                closeBtn.replaceWith(menuBtn)
            }
        })

        const leopardData = {
            heading: '',
            paragraph1: '',
            paragraph2: '',
            paragraph3: '',
            subheading: '',
            subheading1: '',
            subheading2: '',
            subpara1: '',
            subheading3: '',
            subpara2: '',
            subheading4: '',
            subpara3: '',
            subheading5: '',
            subpara4: '',
            subheading6: '',
            subpara5: '',
            subheading7: '',
            subpara6: '',
            subheading8: '',
            subpara7: '',
            subheading9: '',
            subpara8: '',
            subpara9: '',
            img1: '',
            img2: '',
            loggedIn: false,
            editMode: false,

            // Checking the login status

            logout() {
                localStorage.setItem('loggedIn', false);
                window.location.href = 'leopard.html';
            },

            login() {
                this.loggedIn = true;

            },

            loadContent() {
                const storedData = localStorage.getItem('leopardData');
                if (storedData) {
                    Object.assign(this, JSON.parse(storedData));
                } else {
                    fetch('leopard.json')
                        .then(response => response.json())
                        .then(data => {
                            Object.assign(this, data);
                            localStorage.setItem('leopardData', JSON.stringify(data));
                        })
                        .catch(error => console.error('Error fetching data:', error));
                }
            },

            saveContent() {
                localStorage.setItem('leopardData', JSON.stringify(this));
                this.editMode = false; // Exit edit mode after saving
            }
        };

        leopardData.loadContent();

        // Function to open popup editor
        function openPopup(elementId) {
            const popupContainer = document.getElementById("popupContainer");
            popupContainer.style.display = "block";
            const elementContent = document.getElementById(elementId).innerText;
            document.getElementById("textContent").value = elementContent;
            // Store the ID of the element being edited
            popupContainer.dataset.elementId = elementId;
        }

        // Function to close popup
        function closePopup() {
            document.getElementById("popupContainer").style.display = "none";
        }

        // Function to save edited text
        function saveText() {
            const popupContainer = document.getElementById("popupContainer");
            const elementId = popupContainer.dataset.elementId;
            const editedText = document.getElementById("textContent").value;
            leopardData[elementId] = editedText;
            localStorage.setItem('leopardData', JSON.stringify(leopardData)); // Save to local storage
            document.getElementById(elementId).innerText = editedText;
            closePopup();
        }

        // Event listeners for popup buttons
        document.getElementById('saveButton').addEventListener('click', saveText);

        document.getElementById('closeButton').addEventListener('click', closePopup);

        function toggleSubscription() {
            const userId = prompt("Enter user email to toggle subscription status:");
            const storedUsers = JSON.parse(localStorage.getItem('users')) || [];

            const userIndex = storedUsers.findIndex(user => user.email === userId);
            if (userIndex === -1) {
                alert("User not found");
                return;
            }

            // Update subscription status of the found user
            storedUsers[userIndex].subscribeToNewsletter = !storedUsers[userIndex].subscribeToNewsletter;

            localStorage.setItem('users', JSON.stringify(storedUsers));
            alert("Subscription status toggled successfully");
        }

        Alpine.data('toggleSubscription', toggleSubscription);

        function toggleSubscription() {
            const userId = prompt("Enter user email to toggle subscription status:");
            const storedUsers = JSON.parse(localStorage.getItem('users')) || [];

            const userIndex = storedUsers.findIndex(user => user.email === userId);
            if (userIndex === -1) {
                alert("User not found");
                return;
            }

            storedUsers[userIndex].subscribeToNewsletter = !storedUsers[userIndex].subscribeToNewsletter;
            localStorage.setItem('users', JSON.stringify(storedUsers));
            alert("Subscription status toggled successfully");
        }
    </script>
</body>

</html>
